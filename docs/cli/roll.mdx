---
title: Roll Commands
description: Commands for managing database migrations
---

The `roll` commands help you manage database migrations using pgroll.

## Subcommands

### baseline
Create a baseline migration for an existing database schema.

```bash
xata roll baseline [--lock-timeout <ms>] [--pgroll-schema <schema>] [--postgres-url <url>] [--role <role>] [--schema <schema>] [--use-version-schema] [--verbose] [--json] [--yes] [-h|--help] [<name>] [<folder>]
```
- `--lock-timeout`: Postgres lock timeout in milliseconds for pgroll DDL operations
- `--pgroll-schema`: Postgres schema to use for pgroll internal state
- `--postgres-url`: Postgres URL
- `--role`: Optional postgres role to set when executing migrations
- `--schema`: Postgres schema to use for the migration
- `--use-version-schema`: Create version schemas for each migration
- `--verbose`: Enable verbose logging
- `--json`: Output in JSON format instead of YAML
- `--yes`: Skip confirmation prompt
- `-h, --help`: Print help information and exit
- `<name>`: Name of the migration (e.g., "01_initial_schema")
- `<folder>`: The directory that contains the migrations (default: `.xata/migrations`)

### complete
Complete an ongoing migration with the operations present in the given file.

```bash
xata roll complete [--lock-timeout <ms>] [--pgroll-schema <schema>] [--postgres-url <url>] [--role <role>] [--schema <schema>] [--use-version-schema] [--verbose] [-h|--help]
```
- `--lock-timeout`: Postgres lock timeout in milliseconds for pgroll DDL operations
- `--pgroll-schema`: Postgres schema to use for pgroll internal state
- `--postgres-url`: Postgres URL
- `--role`: Optional postgres role to set when executing migrations
- `--schema`: Postgres schema to use for the migration
- `--use-version-schema`: Create version schemas for each migration
- `--verbose`: Enable verbose logging
- `-h, --help`: Print help information and exit

### init
Initialize pgroll in the target database.

```bash
xata roll init [--lock-timeout <ms>] [--pgroll-schema <schema>] [--postgres-url <url>] [--role <role>] [--schema <schema>] [--use-version-schema] [--verbose] [-h|--help]
```
- `--lock-timeout`: Postgres lock timeout in milliseconds for pgroll DDL operations
- `--pgroll-schema`: Postgres schema to use for pgroll internal state
- `--postgres-url`: Postgres URL
- `--role`: Optional postgres role to set when executing migrations
- `--schema`: Postgres schema to use for the migration
- `--use-version-schema`: Create version schemas for each migration
- `--verbose`: Enable verbose logging
- `-h, --help`: Print help information and exit

### latest
Print the name of the latest schema version, either in the target database or a local directory.

```bash
xata roll latest [--lock-timeout <ms>] [--pgroll-schema <schema>] [--postgres-url <url>] [--role <role>] [--schema <schema>] [--verbose] [--local] [--with-schema] [-h|--help]
```
- `--lock-timeout`: Postgres lock timeout in milliseconds for pgroll DDL operations
- `--pgroll-schema`: Postgres schema to use for pgroll internal state
- `--postgres-url`: Postgres URL
- `--role`: Optional postgres role to set when executing migrations
- `--schema`: Postgres schema to use for the migration
- `--verbose`: Enable verbose logging
- `--local`: Retrieve the latest version from a local migration directory
- `--with-schema`: Prefix the version with the schema name
- `-h, --help`: Print help information and exit

### migrate
Apply outstanding migrations from a directory to a database.

```bash
xata roll migrate [--lock-timeout <ms>] [--pgroll-schema <schema>] [--postgres-url <url>] [--role <role>] [--schema <schema>] [--verbose] [--backfill-batch-delay <delay>] [--backfill-batch-size <size>] [--complete] [-h|--help] [<folder>]
```
- `--lock-timeout`: Postgres lock timeout in milliseconds for pgroll DDL operations
- `--pgroll-schema`: Postgres schema to use for pgroll internal state
- `--postgres-url`: Postgres URL
- `--role`: Optional postgres role to set when executing migrations
- `--schema`: Postgres schema to use for the migration
- `--verbose`: Enable verbose logging
- `--backfill-batch-delay`: Duration of delay between batch backfills (eg. 1s, 1000ms)
- `--backfill-batch-size`: Number of rows backfilled in each batch
- `--complete`: Complete the final migration rather than leaving it active
- `-h, --help`: Print help information and exit
- `<folder>`: The directory that contains the migrations (default: `.xata/migrations`)

### update
Update outdated migrations in a directory.

```bash
xata roll update [--lock-timeout <ms>] [--pgroll-schema <schema>] [--postgres-url <url>] [--role <role>] [--schema <schema>] [--verbose] [-h|--help] [<folder>]
```
- `--lock-timeout`: Postgres lock timeout in milliseconds for pgroll DDL operations
- `--pgroll-schema`: Postgres schema to use for pgroll internal state
- `--postgres-url`: Postgres URL
- `--role`: Optional postgres role to set when executing migrations
- `--schema`: Postgres schema to use for the migration
- `--verbose`: Enable verbose logging
- `-h, --help`: Print help information and exit
- `<folder>`: The directory that contains the migrations (default: `.xata/migrations`)

### pull
Pull migration history from the target database and write it to disk.

```bash
xata roll pull [--lock-timeout <ms>] [--pgroll-schema <schema>] [--postgres-url <url>] [--role <role>] [--schema <schema>] [--verbose] [--json] [--with-prefixes] [-h|--help] [<folder>]
```
- `--lock-timeout`: Postgres lock timeout in milliseconds for pgroll DDL operations
- `--pgroll-schema`: Postgres schema to use for pgroll internal state
- `--postgres-url`: Postgres URL
- `--role`: Optional postgres role to set when executing migrations
- `--schema`: Postgres schema to use for the migration
- `--verbose`: Enable verbose logging
- `--json`: Output each migration in JSON format instead of YAML
- `--with-prefixes`: Prefix each migration filename with its position in the schema history
- `-h, --help`: Print help information and exit
- `<folder>`: The target directory to pull migrations into (default: `.xata/migrations`)

### rollback
Roll back an ongoing migration.

```bash
xata roll rollback [--lock-timeout <ms>] [--pgroll-schema <schema>] [--postgres-url <url>] [--role <role>] [--schema <schema>] [--verbose] [-h|--help]
```
- `--lock-timeout`: Postgres lock timeout in milliseconds for pgroll DDL operations
- `--pgroll-schema`: Postgres schema to use for pgroll internal state
- `--postgres-url`: Postgres URL
- `--role`: Optional postgres role to set when executing migrations
- `--schema`: Postgres schema to use for the migration
- `--verbose`: Enable verbose logging
- `-h, --help`: Print help information and exit

### start
Start a migration for the operations present in the given file.

```bash
xata roll start <file> [--lock-timeout <ms>] [--pgroll-schema <schema>] [--postgres-url <url>] [--role <role>] [--schema <schema>] [--use-version-schema] [--verbose] [--backfill-batch-delay <delay>] [--backfill-batch-size <size>] [--complete] [--skip-validation] [-h|--help]
```
- `<file>`: The migration file to start
- `--lock-timeout`: Postgres lock timeout in milliseconds for pgroll DDL operations
- `--pgroll-schema`: Postgres schema to use for pgroll internal state
- `--postgres-url`: Postgres URL
- `--role`: Optional postgres role to set when executing migrations
- `--schema`: Postgres schema to use for the migration
- `--use-version-schema`: Create version schemas for each migration
- `--verbose`: Enable verbose logging
- `--backfill-batch-delay`: Duration of delay between batch backfills (eg. 1s, 1000ms)
- `--backfill-batch-size`: Number of rows backfilled in each batch
- `--complete`: Mark the migration as complete
- `--skip-validation`: Skip migration validation
- `-h, --help`: Print help information and exit

### status
Show pgroll status.

```bash
xata roll status [--lock-timeout <ms>] [--pgroll-schema <schema>] [--postgres-url <url>] [--role <role>] [--schema <schema>] [--verbose] [-h|--help]
```
- `--lock-timeout`: Postgres lock timeout in milliseconds for pgroll DDL operations
- `--pgroll-schema`: Postgres schema to use for pgroll internal state
- `--postgres-url`: Postgres URL
- `--role`: Optional postgres role to set when executing migrations
- `--schema`: Postgres schema to use for the migration
- `--verbose`: Enable verbose logging
- `-h, --help`: Print help information and exit

### convert
Convert SQL statements to a pgroll migration.

```bash
xata roll convert <file> [--lock-timeout <ms>] [--pgroll-schema <schema>] [--postgres-url <url>] [--role <role>] [--schema <schema>] [--verbose] [--json] [-h|--help]
```
- `<file>`: The migration file to start
- `--lock-timeout`: Postgres lock timeout in milliseconds for pgroll DDL operations
- `--pgroll-schema`: Postgres schema to use for pgroll internal state
- `--postgres-url`: Postgres URL
- `--role`: Optional postgres role to set when executing migrations
- `--schema`: Postgres schema to use for the migration
- `--verbose`: Enable verbose logging
- `--json`: Output migration file in JSON format instead of YAML
- `-h, --help`: Print help information and exit

## Global Flags

- `-h, --help` 