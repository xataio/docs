---
title: Staging Replicas
description: Secure staging environments with automatic data anonymization and Copy-on-Write branching
---

Xata's staging replica system combines Copy-on-Write branching with data anonymization to create secure, production-like environments for development and testing.

## Implementation

### Replication Architecture

The staging replica system uses a multi-step process:

1. **Initial Replication**: Creates a base copy of your production database
2. **Data Anonymization**: Applies anonymization rules during replication
3. **Branch Creation**: Enables instant branching from the anonymized replica

### Anonymization Process

Data anonymization is implemented at the replication layer:

1. **Column-level Rules**: Define anonymization rules per column
2. **Type Preservation**: Maintains data types and relationships
3. **Referential Integrity**: Preserves foreign key relationships
4. **Consistent Anonymization**: Same input always produces same output

## Key Features

### Security

- **PII Protection**: Automatically anonymizes sensitive data
- **Compliance Ready**: Helps meet GDPR, HIPAA, and other requirements
- **Access Control**: Granular permissions for staging environments

### Performance

- **Zero Impact**: Production database performance unaffected
- **Fast Replication**: Efficient data transfer and processing
- **Instant Branching**: Create new environments in seconds

## Integration

Works with all major PostgreSQL providers:
- AWS RDS
- Amazon Aurora
- Google Cloud SQL
- Azure Database
- Self-hosted PostgreSQL

## Use Cases

### Development

1. Create anonymized staging environment
2. Develop against realistic data
3. Test new features safely
4. No risk of exposing sensitive information

### Testing

1. Run automated tests against anonymized data
2. Test data migrations safely
3. Validate schema changes
4. Performance testing with realistic data volumes

## Getting Started

To create a staging replica:

```bash
xata clone --anonymize
```

To configure anonymization rules:

```bash
xata config set anonymization.rules '{"users.email": "email", "users.phone": "phone"}'
```

[Learn more about data anonymization](/core-concepts/anonymization) 